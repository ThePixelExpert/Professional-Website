FROM node:18-alpine

WORKDIR /app

# Install dependencies first (cacheable)
COPY contact-backend/package.json contact-backend/package-lock.json ./
RUN npm install

# Copy backend source files
COPY contact-backend/server.js ./
COPY contact-backend/.env ./
# If you have other backend files (e.g., routes, utils), add them here:
# COPY contact-backend/routes/ ./routes/
# COPY contact-backend/utils/ ./utils/
# (repeat for any other folders/files your backend needs)

EXPOSE 3001
CMD ["npm", "start"]