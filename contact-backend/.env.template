# =============================================================================
# Edwards Engineering Backend - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env to git - it contains secrets!
# =============================================================================

# -----------------------------------------------------------------------------
# Supabase Configuration
# -----------------------------------------------------------------------------
# For LOCAL development (Supabase CLI):
#   SUPABASE_URL=http://localhost:54321
#   SUPABASE_ANON_KEY=(get "Publishable" key from `npx supabase status`)
#   SUPABASE_SERVICE_ROLE_KEY=(get "Secret" key from `npx supabase status`)
#
# For PRODUCTION (self-hosted on Proxmox):
#   SUPABASE_URL=https://supabase.edwardstech.dev
#   SUPABASE_ANON_KEY=(from production .env JWT generation)
#   SUPABASE_SERVICE_ROLE_KEY=(from production .env JWT generation)
# -----------------------------------------------------------------------------

SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# -----------------------------------------------------------------------------
# Legacy Database Configuration (will be removed after migration)
# Keep these for backward compatibility during migration
# -----------------------------------------------------------------------------

DB_HOST=postgres-service
DB_PORT=5432
DB_NAME=ecommerce
DB_USER=ecommerce_user
DB_PASSWORD=

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------

NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# JWT Authentication (will be replaced by Supabase Auth in Phase 3)
# -----------------------------------------------------------------------------

JWT_SECRET=
ADMIN_USER=admin
ADMIN_PASS=

# -----------------------------------------------------------------------------
# Email Configuration (Nodemailer)
# -----------------------------------------------------------------------------

EMAIL_USER=
EMAIL_APP_PASSWORD=

# -----------------------------------------------------------------------------
# Stripe Payment Processing
# -----------------------------------------------------------------------------

STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# =============================================================================
# AUTHENTICATION (Supabase Auth)
# =============================================================================
# Google OAuth is configured in Supabase Dashboard, not here.
# After running 'npx supabase start', configure Google OAuth:
# 1. Go to http://127.0.0.1:54323 (Supabase Studio)
# 2. Navigate to Authentication > Providers > Google
# 3. Add your Google OAuth credentials
#
# To get Google OAuth credentials:
# 1. Go to https://console.cloud.google.com/
# 2. Create OAuth 2.0 Client ID
# 3. Add authorized redirect URI: http://127.0.0.1:54321/auth/v1/callback
#
# Auth Hook Configuration:
# After migrations, register the custom_access_token_hook:
# 1. Go to Supabase Studio > Authentication > Hooks
# 2. Enable "Custom Access Token" hook
# 3. Select function: public.custom_access_token_hook
#
# Admin Role Assignment:
# After a user logs in with Google OAuth, assign admin role via SQL:
# 1. In Supabase Studio > SQL Editor, run:
#    INSERT INTO public.user_roles (user_id, role)
#    VALUES ('your-user-id-here', 'admin');
# =============================================================================
